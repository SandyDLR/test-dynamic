<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transifex Live Dynamic Content Demo</title>
    <script src="https://cdn.transifex.com/live.js"></script>
    <script>
window.liveSettings = {
    api_key: "290ef8bb21e24a3095729db5236bb89a",,
    variables_parser: function (text, fn) {
        return text.replace(/\b\d{4}-\d{2}-\d{2} \d{2}:\d{2} [AP]M\b/g, function (match) {
            return fn(match); // Convert detected timestamps into {{0}}
        });
    }
};
</script>

</head>
<body>
    <div id="content">
        <h1>Welcome to Site</h1>
        <p id="dynamicText"></p>
    </div>

    <input type="text" id="emailInput" placeholder="Enter email address">
    <button onclick="loadDynamicContent()">Load Dynamic Content</button>

    <script>
        function loadDynamicContent() {
            const email = document.getElementById('emailInput').value || "welcome@test.email.com";
            const message = `Your order number is <var>${email}</var>. Please keep it safe.`;
            document.getElementById('dynamicText').innerHTML = message;

            // Mark the newly injected content for translation
            Transifex.live.onReady(function() {
                Transifex.live.translateNode(document.getElementById('content'));
            });
        }
    </script>

    <p id="confirmation-message">
    Your appointment is scheduled for 2025-02-23 at 10:00 AM.
</p

</body>
</html>
